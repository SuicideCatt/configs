$ctl = hyprctl
$lock = hyprlock
$check = pidof hyprlock
$keyboard = dakai-ps/2+usb-keyboard

$displays = $ctl dispatch dpms

$sig_lock = loginctl lock-session

general {
	lock_cmd = $check || $ctl switchxkblayout $keyboard 0 && $lock
	before_sleep_cmd = $sig_lock
	after_sleep_cmd = $displays on
}

listener {
	timeout = 300
	on-timeout = $sig_lock
}

listener {
	timeout = 330
	on-timeout = $displays off
	on-resume = $displays on
}
